{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\udee1\ufe0f Backend-AntiGinx","text":""},{"location":"#about-the-project","title":"About the Project","text":"<p>Backend-AntiGinx is the REST API server for the AntiGinx security scanning platform. Built with Go and the Gin framework, it provides endpoints for submitting security scan requests, processing results from worker services, and retrieving scan data. The service uses PostgreSQL for data persistence and RabbitMQ for asynchronous task distribution to scan workers.</p>"},{"location":"#technologies","title":"Technologies","text":"Technology Description \ud83c\udfaf Go 1.25 Main programming language \ud83c\udf10 Gin High-performance HTTP web framework \ud83d\uddc4\ufe0f PostgreSQL Relational database for scan data persistence \ud83d\udc30 RabbitMQ Message broker for async task distribution \ud83d\udd37 GORM ORM library for database operations \ud83d\udc33 Docker Containerization with multi-stage build \ud83d\udd04 GitHub Actions CI/CD: build, tests, release, auto-labeling \ud83d\udce6 GHCR GitHub Container Registry for Docker images \ud83d\udcda GitHub Pages Documentation hosting (MkDocs)"},{"location":"#project-structure","title":"Project Structure","text":"<pre><code>Backend-AntiGinx/\n\u251c\u2500\u2500 internal/\n\u2502   \u251c\u2500\u2500 api/             # HTTP routing configuration\n\u2502   \u251c\u2500\u2500 handlers/        # Request handlers (business logic)\n\u2502   \u2514\u2500\u2500 models/          # Database models (GORM)\n\u251c\u2500\u2500 docs/                # MkDocs documentation\n\u251c\u2500\u2500 main.go              # Application entry point\n\u251c\u2500\u2500 go.mod               # Go module dependencies\n\u251c\u2500\u2500 Dockerfile           # Multi-stage Docker build\n\u251c\u2500\u2500 docker-compose.yml   # Container orchestration\n\u2514\u2500\u2500 mkdocs.yml           # Documentation configuration\n</code></pre>"},{"location":"#core-components","title":"Core Components","text":"<ul> <li>internal/api - HTTP routing using Gin framework with RESTful endpoint definitions</li> <li>internal/handlers - Request handlers implementing scan submission, result processing, and data retrieval</li> <li>internal/models - GORM models for <code>Scan</code> and <code>ScanResult</code> entities with UUID support</li> </ul>"},{"location":"#api-endpoints","title":"API Endpoints","text":"Method Endpoint Description POST <code>/api/scans</code> Submit a new security scan request POST <code>/api/results</code> Submit scan results (from workers) GET <code>/api/scans/:id</code> Retrieve scan details and results"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#prerequisites","title":"Prerequisites","text":"<ul> <li>Go 1.25 or higher (download here)</li> <li>PostgreSQL 14+</li> <li>RabbitMQ 3.x</li> <li>Docker &amp; Docker Compose (optional)</li> </ul>"},{"location":"#environment-variables","title":"Environment Variables","text":"<p>Create a <code>.env</code> file in the project root:</p> <pre><code># Server\nBACKEND_PORT=8080\n\n# PostgreSQL\nDATABASE_URL=postgres://user:password@localhost:5432/antiginx?sslmode=disable\n\n# RabbitMQ\nRABBITMQ_URL=amqp://user:password@localhost:5672/\n</code></pre>"},{"location":"#running-locally","title":"Running Locally","text":"<pre><code># Clone the repository\ngit clone https://github.com/prawo-i-piesc/backend-antiginx.git\ncd backend-antiginx\n\n# Install dependencies\ngo mod download\n\n# Run the server (requires PostgreSQL and RabbitMQ)\ngo run main.go\n</code></pre>"},{"location":"#using-docker-compose","title":"Using Docker Compose","text":"<pre><code># Build and start all services\ndocker-compose up -d --build\n\n# View logs\ndocker-compose logs -f backend-antiginx\n\n# Stop services\ndocker-compose down\n</code></pre>"},{"location":"#using-pre-built-docker-image","title":"Using Pre-built Docker Image","text":"<pre><code># Pull the latest image\ndocker pull ghcr.io/prawo-i-piesc/backend-antiginx:latest\n\n# Run with environment variables\ndocker run -d \\\n  -p 8080:8080 \\\n  -e DATABASE_URL=\"postgres://...\" \\\n  -e RABBITMQ_URL=\"amqp://...\" \\\n  ghcr.io/prawo-i-piesc/backend-antiginx:latest\n</code></pre>"},{"location":"#api-usage-examples","title":"API Usage Examples","text":""},{"location":"#submit-a-new-scan","title":"Submit a new scan","text":"<pre><code>curl -X POST http://localhost:8080/api/scans \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"target_url\": \"https://example.com\"}'\n</code></pre> <p>Response: <pre><code>{\n  \"scanId\": \"01234567-89ab-cdef-0123-456789abcdef\",\n  \"status\": \"PENDING\"\n}\n</code></pre></p>"},{"location":"#get-scan-results","title":"Get scan results","text":"<pre><code>curl http://localhost:8080/api/scans/01234567-89ab-cdef-0123-456789abcdef\n</code></pre>"},{"location":"#links","title":"Links","text":"<ul> <li>\ud83d\udce6 GitHub Repository</li> <li>\ud83d\udc33 Container Images (GHCR)</li> <li>\ud83d\udcda Documentation (GitHub Pages)</li> <li>\ud83d\ude80 GitHub Actions</li> <li>\ud83d\udcdd License</li> </ul>"},{"location":"internal/api/","title":"API","text":""},{"location":"internal/api/#api","title":"api","text":"<pre><code>import \"github.com/prawo-i-piesc/backend/internal/api\"\n</code></pre> <p>Package api provides HTTP routing configuration for the backend-antiginx service.</p> <p>This package defines the API routes and their mappings to handler functions using the Gin web framework.</p>"},{"location":"internal/api/#index","title":"Index","text":"<ul> <li>func NewRouter(scanHandler *handlers.ScanHandler, authHandler *handlers.AuthHandler) *gin.Engine</li> </ul>"},{"location":"internal/api/#func-newrouter","title":"func NewRouter","text":"<pre><code>func NewRouter(scanHandler *handlers.ScanHandler, authHandler *handlers.AuthHandler) *gin.Engine\n</code></pre> <p>NewRouter creates and configures a new Gin router with all API endpoints.</p> <p>The router exposes the following public endpoints under /api prefix:</p> <ul> <li>POST /api/scans - Submit a new security scan request</li> <li>POST /api/results - Submit scan results from a worker</li> <li>GET /api/scans/:id - Retrieve scan details and results by ID</li> </ul> <p>Parameters:</p> <ul> <li>scanHandler: Handler instance containing business logic for scan operations</li> </ul> <p>Returns:</p> <ul> <li>*gin.Engine: Configured Gin router ready to serve HTTP requests</li> </ul> <p>Example:</p> <pre><code>handler := handlers.NewScanHandler(amqpChannel, db)\nrouter := api.NewRouter(handler)\nrouter.Run(\":8080\")\n</code></pre> <p>Generated by gomarkdoc</p>"},{"location":"internal/handlers/","title":"Handlers","text":""},{"location":"internal/handlers/#handlers","title":"handlers","text":"<pre><code>import \"github.com/prawo-i-piesc/backend/internal/handlers\"\n</code></pre>"},{"location":"internal/handlers/#index","title":"Index","text":"<ul> <li>type AsyncResultRequest</li> <li>type AuthHandler</li> <li>func NewAuthHandler(db *gorm.DB) *AuthHandler</li> <li>func (h *AuthHandler) GenerateToken(userID string) (string, error)</li> <li>func (h *AuthHandler) Login(c *gin.Context)</li> <li>func (h *AuthHandler) Me(c *gin.Context)</li> <li>func (h *AuthHandler) Register(c *gin.Context)</li> <li>type CreateScanRequest</li> <li>type EngineTestResult</li> <li>type LoginRequest</li> <li>type RegisterRequest</li> <li>type ResultSubmissionRequest</li> <li>type ScanHandler</li> <li>func NewScanHandler(ch *amqp.Channel, db *gorm.DB) *ScanHandler</li> <li>func (h *ScanHandler) HandleGetScan(c *gin.Context)</li> <li>func (h *ScanHandler) HandleHealthCheck(c *gin.Context)</li> <li>func (h *ScanHandler) HandleResultSubmission(c *gin.Context)</li> <li>func (h *ScanHandler) HandleScanSubmission(c *gin.Context)</li> <li>type ScanResultItem</li> <li>type ScanTaskMessage</li> </ul>"},{"location":"internal/handlers/#type-asyncresultrequest","title":"type AsyncResultRequest","text":"<pre><code>type AsyncResultRequest struct {\n    Target string           `json:\"target\"`\n    TestID string           `json:\"testId\"`\n    Result EngineTestResult `json:\"result\"`\n}\n</code></pre>"},{"location":"internal/handlers/#type-authhandler","title":"type AuthHandler","text":"<pre><code>type AuthHandler struct {\n    db *gorm.DB\n}\n</code></pre>"},{"location":"internal/handlers/#func-newauthhandler","title":"func NewAuthHandler","text":"<pre><code>func NewAuthHandler(db *gorm.DB) *AuthHandler\n</code></pre>"},{"location":"internal/handlers/#func-authhandler-generatetoken","title":"func (*AuthHandler) GenerateToken","text":"<pre><code>func (h *AuthHandler) GenerateToken(userID string) (string, error)\n</code></pre>"},{"location":"internal/handlers/#func-authhandler-login","title":"func (*AuthHandler) Login","text":"<pre><code>func (h *AuthHandler) Login(c *gin.Context)\n</code></pre>"},{"location":"internal/handlers/#func-authhandler-me","title":"func (*AuthHandler) Me","text":"<pre><code>func (h *AuthHandler) Me(c *gin.Context)\n</code></pre>"},{"location":"internal/handlers/#func-authhandler-register","title":"func (*AuthHandler) Register","text":"<pre><code>func (h *AuthHandler) Register(c *gin.Context)\n</code></pre>"},{"location":"internal/handlers/#type-createscanrequest","title":"type CreateScanRequest","text":"<pre><code>type CreateScanRequest struct {\n    TargetURL string `json:\"target_url\" binding:\"required\"`\n}\n</code></pre>"},{"location":"internal/handlers/#type-enginetestresult","title":"type EngineTestResult","text":"<pre><code>type EngineTestResult struct {\n    Name        string      `json:\"Name\"`\n    Certainty   int         `json:\"Certainty\"`\n    ThreatLevel string      `json:\"ThreatLevel\"`\n    Metadata    interface{} `json:\"Metadata\"`\n    Description string      `json:\"Description\"`\n}\n</code></pre>"},{"location":"internal/handlers/#type-loginrequest","title":"type LoginRequest","text":"<pre><code>type LoginRequest struct {\n    Email    string `json:\"email\" binding:\"required,email\"`\n    Password string `json:\"password\" binding:\"required,min=8\"`\n}\n</code></pre>"},{"location":"internal/handlers/#type-registerrequest","title":"type RegisterRequest","text":"<pre><code>type RegisterRequest struct {\n    FullName string `json:\"full_name\" binding:\"required\"`\n    Email    string `json:\"email\" binding:\"required,email\"`\n    Password string `json:\"password\" binding:\"required,min=8\"`\n}\n</code></pre>"},{"location":"internal/handlers/#type-resultsubmissionrequest","title":"type ResultSubmissionRequest","text":"<pre><code>type ResultSubmissionRequest struct {\n    ScanID      string           `json:\"scan_id\" binding:\"required,uuid\"`\n    Status      string           `json:\"status\" binding:\"required,oneof=COMPLETED FAILED\"`\n    StartedAt   time.Time        `json:\"started_at\" binding:\"required\"`\n    CompletedAt time.Time        `json:\"completed_at\" binding:\"required\"`\n    Results     []ScanResultItem `json:\"results\" binding:\"required,dive\"`\n}\n</code></pre>"},{"location":"internal/handlers/#type-scanhandler","title":"type ScanHandler","text":"<pre><code>type ScanHandler struct {\n    amqpChannel *amqp.Channel\n    db          *gorm.DB\n}\n</code></pre>"},{"location":"internal/handlers/#func-newscanhandler","title":"func NewScanHandler","text":"<pre><code>func NewScanHandler(ch *amqp.Channel, db *gorm.DB) *ScanHandler\n</code></pre>"},{"location":"internal/handlers/#func-scanhandler-handlegetscan","title":"func (*ScanHandler) HandleGetScan","text":"<pre><code>func (h *ScanHandler) HandleGetScan(c *gin.Context)\n</code></pre>"},{"location":"internal/handlers/#func-scanhandler-handlehealthcheck","title":"func (*ScanHandler) HandleHealthCheck","text":"<pre><code>func (h *ScanHandler) HandleHealthCheck(c *gin.Context)\n</code></pre>"},{"location":"internal/handlers/#func-scanhandler-handleresultsubmission","title":"func (*ScanHandler) HandleResultSubmission","text":"<pre><code>func (h *ScanHandler) HandleResultSubmission(c *gin.Context)\n</code></pre>"},{"location":"internal/handlers/#func-scanhandler-handlescansubmission","title":"func (*ScanHandler) HandleScanSubmission","text":"<pre><code>func (h *ScanHandler) HandleScanSubmission(c *gin.Context)\n</code></pre>"},{"location":"internal/handlers/#type-scanresultitem","title":"type ScanResultItem","text":"<pre><code>type ScanResultItem struct {\n    TestID      string `json:\"test_id\" binding:\"required\"`\n    TestName    string `json:\"test_name\" binding:\"required\"`\n    Category    string `json:\"category\" binding:\"required\"`\n    Severity    string `json:\"severity\" binding:\"required\"`\n    Passed      bool   `json:\"passed\"`\n    Message     string `json:\"message\"`\n    Reference   string `json:\"reference\"`\n    Remediation string `json:\"remediation\"`\n}\n</code></pre>"},{"location":"internal/handlers/#type-scantaskmessage","title":"type ScanTaskMessage","text":"<pre><code>type ScanTaskMessage struct {\n    ID        string `json:\"id\"`\n    TargetURL string `json:\"target_url\"`\n}\n</code></pre> <p>Generated by gomarkdoc</p>"},{"location":"internal/models/","title":"Models","text":""},{"location":"internal/models/#models","title":"models","text":"<pre><code>import \"github.com/prawo-i-piesc/backend/internal/models\"\n</code></pre> <p>Package models defines the data structures and database models for the backend-antiginx service.</p> <p>This package contains GORM models that represent database tables and are used for ORM operations throughout the application.</p>"},{"location":"internal/models/#index","title":"Index","text":"<ul> <li>type Scan</li> <li>type ScanResult</li> <li>type User</li> </ul>"},{"location":"internal/models/#type-scan","title":"type Scan","text":"<p>Scan represents a security scan request and its current state.</p> <p>Each scan targets a specific URL and progresses through various statuses (PENDING, RUNNING, COMPLETED, FAILED) as it is processed by worker services.</p> <p>The Results field contains all individual test results associated with this scan, loaded via GORM's foreign key relationship.</p> <pre><code>type Scan struct {\n    // ID is the unique identifier for the scan (UUIDv7)\n    ID  uuid.UUID `gorm:\"type:uuid;primary_key;\" json:\"id\"`\n    // TargetURL is the URL that was scanned for security issues\n    TargetURL string `json:\"target_url\"`\n    // Status indicates the current state of the scan (PENDING, RUNNING, COMPLETED, FAILED)\n    Status string `json:\"status\"`\n    // CreatedAt is the timestamp when the scan was submitted\n    CreatedAt time.Time `json:\"created_at\"`\n    // StartedAt is the timestamp when a worker began processing the scan (nil if not started)\n    StartedAt *time.Time `json:\"started_at\"`\n    // CompletedAt is the timestamp when the scan finished (nil if not completed)\n    CompletedAt *time.Time `json:\"completed_at\"`\n    // Results contains all individual test results for this scan\n    Results []ScanResult `gorm:\"foreignKey:ScanID\" json:\"results\"`\n}\n</code></pre> <p></p>"},{"location":"internal/models/#type-scanresult","title":"type ScanResult","text":"<pre><code>type ScanResult struct {\n    ID       uint      `gorm:\"primaryKey\" json:\"id\"`\n    ScanID   uuid.UUID `gorm:\"type:uuid;index\" json:\"scan_id\"`\n    TestName string    `json:\"test_name\"`\n    Severity string    `json:\"severity\"`\n    Passed   bool      `json:\"passed\"`\n    Message  string    `gorm:\"type:text\" json:\"message\"`\n\n    Metadata datatypes.JSON `json:\"metadata\"`\n}\n</code></pre>"},{"location":"internal/models/#type-user","title":"type User","text":"<pre><code>type User struct {\n    ID        uuid.UUID `gorm:\"type:uuid;primary_key;\" json:\"id\"`\n    FullName  string    `json:\"full_name\"`\n    Email     string    `gorm:\"uniqueIndex; not null\" json:\"email\"`\n    CreatedAt time.Time `json:\"created_at\"`\n    Password  []byte    `json:\"-\"`\n}\n</code></pre> <p>Generated by gomarkdoc</p>"},{"location":"main/","title":"Main","text":""},{"location":"main/#backend-antiginx","title":"backend-antiginx","text":"<pre><code>import \"github.com/prawo-i-piesc/backend\"\n</code></pre> <p>Package main provides the entry point for the backend-antiginx API server.</p> <p>The server connects to PostgreSQL database and RabbitMQ message broker, performs database migrations, and starts an HTTP server for handling security scan requests.</p>"},{"location":"main/#environment-variables","title":"Environment Variables","text":"<p>The following environment variables are required:</p> <ul> <li>DATABASE_URL: PostgreSQL connection string (e.g., postgres://user:pass@host:5432/db)</li> <li>RABBITMQ_URL: RabbitMQ connection string (e.g., amqp://user:pass@host:5672/)</li> </ul>"},{"location":"main/#example","title":"Example","text":"<p>To run the server:</p> <pre><code>DATABASE_URL=\"postgres://...\" RABBITMQ_URL=\"amqp://...\" go run main.go\n</code></pre>"},{"location":"main/#index","title":"Index","text":"<ul> <li>func main()</li> </ul>"},{"location":"main/#func-main","title":"func main","text":"<pre><code>func main()\n</code></pre> <p>main initializes and starts the backend-antiginx API server.</p> <p>It performs the following steps:</p> <ol> <li>Loads environment variables from .env file (optional)</li> <li>Establishes connection to PostgreSQL database</li> <li>Runs database migrations for Scan and ScanResult models</li> <li>Connects to RabbitMQ and declares the scan_queue</li> <li>Initializes HTTP handlers and starts the server on port 8080</li> </ol> <p>The function will terminate with a fatal error if any critical initialization step fails (database connection, RabbitMQ connection, etc.)</p> <p>Generated by gomarkdoc</p>"}]}